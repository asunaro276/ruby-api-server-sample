---
name: OpenSpec: Archive
description: デプロイされたOpenSpec変更をアーカイブし、仕様を更新します。
category: OpenSpec
tags: [openspec, archive]
---
<!-- OPENSPEC:START -->
**ガードレール**
- まずはシンプルで最小限の実装を優先し、要求された場合や明確に必要な場合にのみ複雑さを追加します。
- 変更は要求された結果に厳密にスコープを限定します。
- OpenSpecの規約や説明が必要な場合は、`openspec/AGENTS.md`（`openspec/`ディレクトリ内にあります。表示されない場合は`ls openspec`または`openspec update`を実行してください）を参照してください。

**ステップ**
1. アーカイブする変更IDを決定します:
   - このプロンプトに既に特定の変更IDが含まれている場合（例: スラッシュコマンド引数によって設定された`<ChangeId>`ブロック内）、空白をトリムした後にその値を使用します。
   - 会話で変更が曖昧に参照されている場合（例: タイトルや要約による）、`openspec list`を実行して可能性のあるIDを表示し、関連する候補を共有し、ユーザーがどれを意図しているかを確認します。
   - それ以外の場合は、会話を確認し、`openspec list`を実行し、どの変更をアーカイブするかをユーザーに尋ねます。確認された変更IDを待ってから進めます。
   - それでも単一の変更IDを識別できない場合は、停止してユーザーにまだ何もアーカイブできないことを伝えます。
2. `openspec list`（または`openspec show <id>`）を実行して変更IDを検証し、変更が存在しない場合、既にアーカイブされている場合、またはアーカイブする準備ができていない場合は停止します。
3. `openspec archive <id> --yes`を実行して、CLIがプロンプトなしで変更を移動し、仕様の更新を適用するようにします（ツール専用の作業の場合のみ`--skip-specs`を使用します）。
4. コマンド出力を確認して、対象の仕様が更新され、変更が`changes/archive/`に配置されたことを確認します。
5. 何かおかしい場合は、`openspec validate --strict`で検証し、`openspec show <id>`で調査します。

**リファレンス**
- アーカイブ前に変更IDを確認するには`openspec list`を使用します。
- 更新された仕様を`openspec list --specs`で調査し、引き渡す前に検証の問題に対処します。
<!-- OPENSPEC:END -->
